<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kingdom Network - Global Ministry Platform</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .header {
            background: rgba(0, 0, 0, 0.3);
            padding: 1rem 0;
            backdrop-filter: blur(10px);
            border-bottom: 2px solid rgba(255, 215, 0, 0.3);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 2rem;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .logo i {
            font-size: 2rem;
            color: #FFD700;
        }

        .logo h1 {
            font-size: 1.8rem;
            font-weight: bold;
            color: #FFD700;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .live-counter {
            background: rgba(255, 0, 0, 0.8);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: bold;
            box-shadow: 0 2px 10px rgba(255, 0, 0, 0.3);
            animation: pulse 2s infinite;
        }

        .live-counter .dot {
            width: 8px;
            height: 8px;
            background: white;
            border-radius: 50%;
            animation: blink 1s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        .nav-menu {
            display: flex;
            gap: 2rem;
            list-style: none;
        }

        .nav-menu li {
            position: relative;
        }

        .nav-menu a {
            color: white;
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .nav-menu a:hover {
            background: rgba(255, 215, 0, 0.2);
            transform: translateY(-2px);
        }

        .main-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 2rem;
        }

        .video-section {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 15px;
            padding: 1.5rem;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 215, 0, 0.3);
        }

        .video-container {
            position: relative;
            width: 100%;
            height: 400px;
            background: #000;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 1rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        .video-player {
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, #1a1a1a, #2d2d2d);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            color: #FFD700;
        }

        .video-player i {
            font-size: 4rem;
            margin-bottom: 1rem;
            animation: glow 2s infinite alternate;
        }

        @keyframes glow {
            0% { text-shadow: 0 0 20px #FFD700; }
            100% { text-shadow: 0 0 30px #FFD700, 0 0 40px #FFD700; }
        }

        .video-controls {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 1rem;
        }

        .control-btn {
            background: linear-gradient(135deg, #FFD700, #FFA500);
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 25px;
            color: #000;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(255, 215, 0, 0.3);
        }

        .control-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(255, 215, 0, 0.5);
        }

        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .widget {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 15px;
            padding: 1.5rem;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 215, 0, 0.3);
        }

        .widget h3 {
            color: #FFD700;
            margin-bottom: 1rem;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .radio-player {
            background: linear-gradient(135deg, #2d2d2d, #1a1a1a);
            padding: 1rem;
            border-radius: 10px;
            margin-bottom: 1rem;
        }

        .radio-controls {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .radio-btn {
            background: linear-gradient(135deg, #28a745, #20c997);
            border: none;
            padding: 0.6rem;
            border-radius: 50%;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .radio-btn:hover {
            transform: scale(1.1);
        }

        .now-playing {
            font-size: 0.9rem;
            color: #20c997;
            font-weight: bold;
        }

        .donation-progress {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 1rem;
            margin-bottom: 1rem;
        }

        .progress-bar {
            background: rgba(255, 255, 255, 0.2);
            height: 10px;
            border-radius: 5px;
            overflow: hidden;
            margin: 0.5rem 0;
        }

        .progress-fill {
            background: linear-gradient(90deg, #FFD700, #FFA500);
            height: 100%;
            width: 67%;
            border-radius: 5px;
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { opacity: 0.8; }
            50% { opacity: 1; }
            100% { opacity: 0.8; }
        }

        .donation-amount {
            display: flex;
            justify-content: space-between;
            margin-top: 0.5rem;
            font-size: 0.9rem;
        }

        .donate-btn {
            background: linear-gradient(135deg, #dc3545, #c82333);
            border: none;
            padding: 1rem 2rem;
            border-radius: 25px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            font-size: 1.1rem;
            box-shadow: 0 5px 15px rgba(220, 53, 69, 0.3);
        }

        .donate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(220, 53, 69, 0.5);
        }

        .schedule-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 0.8rem;
            border-radius: 8px;
            margin-bottom: 0.5rem;
            border-left: 4px solid #FFD700;
        }

        .schedule-time {
            font-weight: bold;
            color: #FFD700;
            font-size: 0.9rem;
        }

        .schedule-program {
            margin-top: 0.2rem;
            font-size: 0.9rem;
        }

        .quick-links {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.5rem;
        }

        .quick-link {
            background: rgba(255, 255, 255, 0.1);
            padding: 0.8rem;
            border-radius: 8px;
            text-align: center;
            text-decoration: none;
            color: white;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 215, 0, 0.3);
        }

        .quick-link:hover {
            background: rgba(255, 215, 0, 0.2);
            transform: translateY(-2px);
        }

        .admin-panel {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.9);
            padding: 2rem;
            border-radius: 15px;
            border: 2px solid #FFD700;
            min-width: 400px;
            z-index: 2000;
            display: none;
        }

        .admin-form {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .admin-form input {
            padding: 0.8rem;
            border-radius: 8px;
            border: 1px solid rgba(255, 215, 0, 0.5);
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 1rem;
        }

        .admin-form input::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }

        .admin-buttons {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }

        .admin-btn {
            flex: 1;
            padding: 0.8rem;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .login-btn {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
        }

        .cancel-btn {
            background: linear-gradient(135deg, #6c757d, #5a6268);
            color: white;
        }

        .admin-btn:hover {
            transform: translateY(-2px);
        }

        .footer {
            background: rgba(0, 0, 0, 0.5);
            padding: 2rem 0;
            margin-top: 3rem;
            text-align: center;
            border-top: 1px solid rgba(255, 215, 0, 0.3);
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        .footer-links {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .footer-links a {
            color: white;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .footer-links a:hover {
            color: #FFD700;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
                padding: 1rem;
                gap: 1rem;
            }

            .header-content {
                flex-direction: column;
                gap: 1rem;
                padding: 1rem;
            }

            .nav-menu {
                flex-wrap: wrap;
                justify-content: center;
                gap: 1rem;
            }

            .video-container {
                height: 250px;
            }

            .quick-links {
                grid-template-columns: 1fr;
            }

            .admin-panel {
                min-width: 90%;
                margin: 0 5%;
            }

            .footer-links {
                flex-direction: column;
                gap: 0.5rem;
            }
        }

        .mobile-menu-toggle {
            display: none;
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
        }

        @media (max-width: 768px) {
            .mobile-menu-toggle {
                display: block;
            }

            .nav-menu {
                display: none;
                position: absolute;
                top: 100%;
                left: 0;
                right: 0;
                background: rgba(0, 0, 0, 0.9);
                flex-direction: column;
                padding: 1rem;
            }

            .nav-menu.active {
                display: flex;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <i class="fas fa-cross"></i>
                <h1>Kingdom Network</h1>
            </div>
            
            <div class="live-counter">
                <div class="dot"></div>
                <span>LIVE: <span id="userCount">12,847</span> viewers worldwide</span>
            </div>

            <button class="mobile-menu-toggle" onclick="toggleMobileMenu()">
                <i class="fas fa-bars"></i>
            </button>

            <nav>
                <ul class="nav-menu" id="navMenu">
                    <li><a href="#" onclick="showSection('home')"><i class="fas fa-home"></i> Home</a></li>
                    <li><a href="#" onclick="showSection('church')"><i class="fas fa-church"></i> Online Church</a></li>
                    <li><a href="#" onclick="showSection('bible')"><i class="fas fa-book-open"></i> Bible College</a></li>
                    <li><a href="#" onclick="showSection('shop')"><i class="fas fa-store"></i> Shop</a></li>
                    <li><a href="#" onclick="showAdminLogin()"><i class="fas fa-cog"></i> Admin</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Video Section -->
        <section class="video-section">
            <h2><i class="fas fa-tv"></i> HPT TV - Heaven's Power Transformation</h2>
            <div class="video-container">
                <div class="video-player">
                    <i class="fas fa-play-circle"></i>
                    <h3>LIVE BROADCAST</h3>
                    <p>Broadcasting God's Love Worldwide</p>
                    <p style="margin-top: 1rem; font-size: 0.9rem;">Current Program: <span id="currentProgram">Sunday Service - Pastor Jonathan</span></p>
                </div>
            </div>
            <div class="video-controls">
                <button class="control-btn" onclick="playVideo()">
                    <i class="fas fa-play"></i> Watch Live
                </button>
                <button class="control-btn" onclick="toggleFullscreen()">
                    <i class="fas fa-expand"></i> Fullscreen
                </button>
                <button class="control-btn" onclick="shareStream()">
                    <i class="fas fa-share"></i> Share
                </button>
            </div>
        </section>

        <!-- Sidebar -->
        <aside class="sidebar">
            <!-- HEM's Radio -->
            <div class="widget">
                <h3><i class="fas fa-radio"></i> HEM's Radio</h3>
                <div class="radio-player">
                    <div class="radio-controls">
                        <button class="radio-btn" onclick="toggleRadio()">
                            <i class="fas fa-play" id="radioIcon"></i>
                        </button>
                        <div>
                            <div class="now-playing">Now Playing:</div>
                            <div id="radioTrack">Christian Worship Mix</div>
                        </div>
                    </div>
                    <div style="font-size: 0.8rem; color: rgba(255,255,255,0.7);">
                        24/7 Christian Music & Sermons
                    </div>
                </div>
            </div>

            <!-- Donations -->
            <div class="widget">
                <h3><i class="fas fa-heart"></i> Support Ministry</h3>
                <div class="donation-progress">
                    <div>Monthly Goal: $15,000</div>
                    <div class="progress-bar">
                        <div class="progress-fill"></div>
                    </div>
                    <div class="donation-amount">
                        <span>$<span id="currentDonation">10,050</span></span>
                        <span>67%</span>
                    </div>
                </div>
                <button class="donate-btn" onclick="donate()">
                    <i class="fas fa-donate"></i> Donate Now
                </button>
            </div>

            <!-- Schedule -->
            <div class="widget">
                <h3><i class="fas fa-calendar-alt"></i> Today's Schedule</h3>
                <div id="schedule">
                    <div class="schedule-item">
                        <div class="schedule-time">9:00 AM</div>
                        <div class="schedule-program">Sunday Service</div>
                    </div>
                    <div class="schedule-item">
                        <div class="schedule-time">11:00 AM</div>
                        <div class="schedule-program">Youth Fellowship</div>
                    </div>
                    <div class="schedule-item">
                        <div class="schedule-time">2:00 PM</div>
                        <div class="schedule-program">Bible Study</div>
                    </div>
                    <div class="schedule-item">
                        <div class="schedule-time">6:00 PM</div>
                        <div class="schedule-program">Evening Prayer</div>
                    </div>
                </div>
            </div>

            <!-- Quick Links -->
            <div class="widget">
                <h3><i class="fas fa-link"></i> Quick Access</h3>
                <div class="quick-links">
                    <a href="#" class="quick-link" onclick="showPrayerRequest()">
                        <i class="fas fa-pray"></i><br>Prayer Request
                    </a>
                    <a href="#" class="quick-link" onclick="showCounseling()">
                        <i class="fas fa-hands-helping"></i><br>Counseling
                    </a>
                    <a href="#" class="quick-link" onclick="showTestimonies()">
                        <i class="fas fa-star"></i><br>Testimonies
                    </a>
                    <a href="#" class="quick-link" onclick="showContact()">
                        <i class="fas fa-envelope"></i><br>Contact Us
                    </a>
                </div>
            </div>
        </aside>
    </main>

    <!-- Admin Login Panel -->
    <div class="admin-panel" id="adminPanel">
        <h3 style="color: #FFD700; margin-bottom: 1rem; text-align: center;">
            <i class="fas fa-lock"></i> Admin Login
        </h3>
        <div class="admin-form">
            <input type="text" id="adminUsername" placeholder="Username" />
            <input type="password" id="adminPassword" placeholder="Password" />
            <div class="admin-buttons">
                <button class="admin-btn login-btn" onclick="adminLogin()">Login</button>
                <button class="admin-btn cancel-btn" onclick="hideAdminLogin()">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-links">
                <a href="#"><i class="fas fa-info-circle"></i> About Us</a>
                <a href="#"><i class="fas fa-phone"></i> Contact</a>
                <a href="#"><i class="fas fa-shield-alt"></i> Privacy Policy</a>
                <a href="#"><i class="fas fa-file-alt"></i> Terms of Service</a>
                <a href="#"><i class="fas fa-question-circle"></i> Support</a>
            </div>
            <p>&copy; 2025 Kingdom Network Ministry. Broadcasting God's Love Worldwide.</p>
            <p style="margin-top: 0.5rem; font-size: 0.9rem; color: rgba(255,255,255,0.7);">
                "Go therefore and make disciples of all nations..." - Matthew 28:19
            </p>
        </div>
    </footer>

    <script>
        // Global variables
        let radioPlaying = false;
        let currentUserCount = 12847;
        let adminLoggedIn = false;
        
        // Admin credentials
        const adminCredentials = {
            'kingdom_admin_1': 'KN2025!Admin',
            'kingdom_admin_2': 'HEM_Admin2025',
            'content_manager': 'Content@2025',
            'ministry_moderator': 'Mod_KN2025!'
        };

        // Initialize everything when page loads
        document.addEventListener('DOMContentLoaded', function() {
            updateSchedule();
            updateDonationProgress();
            startProgramUpdater();
            updateUserInterface();
            
            // Start live user counter updates
            setInterval(updateLiveUserCount, 30000); // Update every 30 seconds
            updateLiveUserCount();
            
            // Start radio track updates
            setInterval(updateRadioTrack, 180000); // Update every 3 minutes
        });

        // Video controls
        function playVideo() {
            alert('ðŸŽ‰ Connecting to HPT TV Live Stream!\n\nðŸ“º You are now watching:\nHeaven\'s Power Transformation TV\n\nBroadcasting God\'s Love Worldwide! ðŸ™');
        }

        function toggleFullscreen() {
            const videoContainer = document.querySelector('.video-container');
            if (document.fullscreenElement) {
                document.exitFullscreen();
            } else {
                videoContainer.requestFullscreen().catch(err => {
                    alert('Fullscreen not supported on this device');
                });
            }
        }

        function shareStream() {
            const url = window.location.href;
            if (navigator.share) {
                navigator.share({
                    title: 'Kingdom Network - HPT TV Live',
                    text: 'Watch HPT TV Live - Broadcasting God\'s Love Worldwide!',
                    url: url
                });
            } else {
                navigator.clipboard.writeText(url).then(() => {
                    alert('ðŸ”— Stream link copied to clipboard!\n\nShare Kingdom Network with your friends and family!');
                }).catch(() => {
                    alert('Stream URL: ' + url);
                });
            }
        }

        // Radio controls with correct SHOUTcast format
        let radioAudio = null;
        let currentStreamIndex = 0;
        const radioStreams = [
            'http://uk3freenew.listen2myradio.com:16580/;stream.mp3',
            'http://uk3freenew.listen2myradio.com:16580/;',
            'http://78.129.150.207:16580/;stream.mp3',
            'http://78.129.150.207:16580/;',
            'http://uk3freenew.listen2myradio.com:16580/',
            'http://78.129.150.207:16580/'
        ];

        function toggleRadio() {
            const radioIcon = document.getElementById('radioIcon');
            const radioTrack = document.getElementById('radioTrack');
            
            if (!radioPlaying) {
                // Start playing radio stream
                radioPlaying = true;
                radioIcon.className = 'fas fa-pause';
                radioTrack.textContent = 'Heaven\'s Embassy Radio - Starting Stream...';
                
                // Try to connect to radio stream
                connectToRadioStream(0);
                
            } else {
                // Stop playing radio
                radioPlaying = false;
                radioIcon.className = 'fas fa-play';
                radioTrack.textContent = 'Heaven\'s Embassy Radio - Click to Play';
                
                if (radioAudio) {
                    radioAudio.pause();
                    radioAudio.src = '';
                    radioAudio.load(); // Clear the audio element
                    radioAudio = null;
                }
            }
        }

        function connectToRadioStream(streamIndex) {
            if (streamIndex >= radioStreams.length) {
                // All streams failed
                document.getElementById('radioTrack').textContent = 'Heaven\'s Embassy Radio - Unable to Connect';
                console.log('All SHOUTcast stream attempts failed');
                
                // Reset radio state
                radioPlaying = false;
                document.getElementById('radioIcon').className = 'fas fa-play';
                
                setTimeout(() => {
                    alert('ðŸ“» Radio Connection Issue\n\n' +
                          'The radio stream is active but your browser may be blocking it.\n\n' +
                          'âœ… Try these solutions:\n' +
                          'â€¢ Refresh the page and try again\n' +
                          'â€¢ Make sure browser audio is enabled\n' +
                          'â€¢ Try a different browser (Chrome/Firefox)\n' +
                          'â€¢ Check if browser has audio permissions\n\n' +
                          'Direct stream: http://uk3freenew.listen2myradio.com:16580/;stream.mp3');
                }, 1000);
                
                return;
            }

            const streamUrl = radioStreams[streamIndex];
            console.log(`Testing SHOUTcast stream ${streamIndex + 1}: ${streamUrl}`);
            
            // Update status
            document.getElementById('radioTrack').textContent = `Connecting to Stream ${streamIndex + 1}...`;
            
            // Clean up previous audio
            if (radioAudio) {
                radioAudio.pause();
                radioAudio.src = '';
                radioAudio.removeEventListener('canplay', null);
                radioAudio.removeEventListener('error', null);
                radioAudio = null;
            }
            
            // Create fresh audio element
            radioAudio = new Audio();
            radioAudio.volume = 0.8;
            radioAudio.preload = "metadata";
            
            // Success handlers
            radioAudio.addEventListener('loadedmetadata', () => {
                console.log(`SHOUTcast stream ${streamIndex + 1} metadata loaded`);
                document.getElementById('radioTrack').textContent = 'Heaven\'s Embassy Radio - Ready';
            });
            
            radioAudio.addEventListener('canplay', () => {
                console.log(`SHOUTcast stream ${streamIndex + 1} can play`);
                document.getElementById('radioTrack').textContent = 'ðŸ”´ Heaven\'s Embassy Radio - READY';
            });
            
            radioAudio.addEventListener('play', () => {
                console.log(`SHOUTcast stream ${streamIndex + 1} started playing`);
                document.getElementById('radioTrack').textContent = 'ðŸŽµ Heaven\'s Embassy Radio - LIVE';
                currentStreamIndex = streamIndex;
            });
            
            radioAudio.addEventListener('playing', () => {
                console.log(`SHOUTcast is now broadcasting`);
                document.getElementById('radioTrack').textContent = 'ðŸŽµ Heaven\'s Embassy Radio - ON AIR';
            });

            radioAudio.addEventListener('timeupdate', () => {
                // Stream is actually playing
                if (radioAudio.currentTime > 0) {
                    document.getElementById('radioTrack').textContent = 'ðŸŽµ Heaven\'s Embassy Radio - BROADCASTING';
                }
            });
            
            // Error handlers
            radioAudio.addEventListener('error', (e) => {
                console.error(`SHOUTcast stream ${streamIndex + 1} error:`, e.target.error);
                
                if (radioPlaying) {
                    // Try next stream
                    setTimeout(() => {
                        connectToRadioStream(streamIndex + 1);
                    }, 1500);
                }
            });
            
            radioAudio.addEventListener('stalled', () => {
                console.log(`SHOUTcast stream ${streamIndex + 1} stalled`);
                document.getElementById('radioTrack').textContent = 'Heaven\'s Embassy Radio - Buffering...';
                
                if (radioPlaying) {
                    setTimeout(() => {
                        connectToRadioStream(streamIndex + 1);
                    }, 3000);
                }
            });

            radioAudio.addEventListener('suspend', () => {
                console.log(`SHOUTcast stream ${streamIndex + 1} suspended`);
                if (radioPlaying) {
                    setTimeout(() => {
                        connectToRadioStream(streamIndex + 1);
                    }, 2000);
                }
            });

            radioAudio.addEventListener('abort', () => {
                console.log(`SHOUTcast stream ${streamIndex + 1} aborted`);
                if (radioPlaying) {
                    setTimeout(() => {
                        connectToRadioStream(streamIndex + 1);
                    }, 1500);
                }
            });
            
            // Set source and load
            radioAudio.src = streamUrl;
            radioAudio.load();
            
            // Attempt to play after a brief delay
            setTimeout(() => {
                if (radioPlaying && radioAudio) {
                    const playPromise = radioAudio.play();
                    
                    if (playPromise !== undefined) {
                        playPromise.then(() => {
                            console.log(`SHOUTcast stream ${streamIndex + 1} play promise resolved`);
                        }).catch(error => {
                            console.error(`SHOUTcast play error for stream ${streamIndex + 1}:`, error);
                            
                            if (error.name === 'NotAllowedError') {
                                document.getElementById('radioTrack').textContent = 'Heaven\'s Embassy Radio - Click to Enable Audio';
                                radioPlaying = false;
                                document.getElementById('radioIcon').className = 'fas fa-play';
                            } else if (error.name === 'NotSupportedError') {
                                // Try next stream format
                                if (radioPlaying) {
                                    setTimeout(() => {
                                        connectToRadioStream(streamIndex + 1);
                                    }, 1000);
                                }
                            } else if (radioPlaying) {
                                // Try next stream
                                setTimeout(() => {
                                    connectToRadioStream(streamIndex + 1);
                                }, 2000);
                            }
                        });
                    }
                }
            }, 1200);
        }

        function retryRadioConnection() {
            if (radioPlaying) {
                console.log('Retrying Heaven\'s Embassy Radio SHOUTcast connection...');
                connectToRadioStream(0);
            }
        }

        function updateRadioStatus(status) {
            document.getElementById('radioTrack').textContent = status;
        }

        function updateRadioTrack() {
            const tracks = [
                'Amazing Grace - Modern Version',
                'How Great Thou Art - Worship Mix',
                'Blessed Assurance - Contemporary',
                'What a Friend We Have in Jesus',
                'It Is Well With My Soul - Live',
                'Great is Thy Faithfulness',
                'Pastor Johnson - Sunday Sermon',
                'Christian Hip Hop Mix',
                'Hillsong Worship Collection'
            ];
            
            if (radioPlaying) {
                const randomTrack = tracks[Math.floor(Math.random() * tracks.length)];
                document.getElementById('radioTrack').textContent = randomTrack + ' - LIVE';
            }
        }

        // Donation system
        function donate() {
            alert('ðŸ™ Thank you for supporting Kingdom Network Ministry!\n\nðŸ’ Your donation helps us:\nâ€¢ Broadcast HPT TV worldwide\nâ€¢ Maintain HEM\'s Radio 24/7\nâ€¢ Support online church services\nâ€¢ Provide free Christian education\nâ€¢ Reach souls globally with the Gospel\n\n"Give, and it will be given to you..." - Luke 6:38\n\nðŸ”— Redirecting to secure donation page...');
        }

        function updateDonationProgress() {
            // Simulate donation updates
            setInterval(() => {
                const current = parseInt(document.getElementById('currentDonation').textContent);
                if (current < 15000) {
                    const increment = Math.floor(Math.random() * 50) + 10;
                    const newAmount = Math.min(current + increment, 15000);
                    document.getElementById('currentDonation').textContent = newAmount.toLocaleString();
                    
                    const percentage = Math.round((newAmount / 15000) * 100);
                    document.querySelector('.progress-fill').style.width = percentage + '%';
                }
            }, 120000); // Update every 2 minutes
        }

        // Live user counter
        function updateLiveUserCount() {
            // Simulate realistic viewer count changes
            const change = Math.floor(Math.random() * 200) - 100; // -100 to +100
            currentUserCount = Math.max(5000, currentUserCount + change);
            document.getElementById('userCount').textContent = currentUserCount.toLocaleString();
        }

        // Schedule system
        function updateSchedule() {
            const schedules = {
                'Sunday': [
                    { time: '9:00 AM', program: 'Sunday Service - Pastor Jonathan' },
                    { time: '11:00 AM', program: 'Youth Fellowship' },
                    { time: '2:00 PM', program: 'Bible Study Group' },
                    { time: '6:00 PM', program: 'Evening Prayer Service' }
                ],
                'Monday': [
                    { time: '6:00 AM', program: 'Morning Prayer' },
                    { time: '12:00 PM', program: 'Midday Meditation' },
                    { time: '7:00 PM', program: 'Bible College - Theology 101' },
                    { time: '8:30 PM', program: 'Community Prayer' }
                ],
                'Tuesday': [
                    { time: '6:00 AM', program: 'Morning Devotion' },
                    { time: '1:00 PM', program: 'Women\'s Ministry' },
                    { time: '7:00 PM', program: 'Marriage Counseling' },
                    { time: '8:00 PM', program: 'Youth Bible Study' }
                ],
                'Wednesday': [
                    { time: '6:00 AM', program: 'Morning Prayer' },
                    { time: '12:00 PM', program: 'Healing Service' },
                    { time: '7:00 PM', program: 'Midweek Service' },
                    { time: '8:30 PM', program: 'Testimonies & Praise' }
                ],
                'Thursday': [
                    { time: '6:00 AM', program: 'Morning Worship' },
                    { time: '1:00 PM', program: 'Men\'s Fellowship' },
                    { time: '7:00 PM', program: 'Bible College - Church History' },
                    { time: '8:30 PM', program: 'Online Counseling' }
                ],
                'Friday': [
                    { time: '6:00 AM', program: 'Morning Prayer' },
                    { time: '12:00 PM', program: 'Community Outreach' },
                    { time: '7:00 PM', program: 'Youth Service' },
                    { time: '8:30 PM', program: 'Worship Night' }
                ],
                'Saturday': [
                    { time: '8:00 AM', program: 'Morning Praise' },
                    { time: '10:00 AM', program: 'Children\'s Ministry' },
                    { time: '3:00 PM', program: 'Community Service' },
                    { time: '7:00 PM', program: 'Preparation for Sunday' }
                ]
            };

            const today = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'][new Date().getDay()];
            const todaySchedule = schedules[today] || schedules['Sunday'];
            
            const scheduleContainer = document.getElementById('schedule');
            scheduleContainer.innerHTML = '';
            
            todaySchedule.forEach(item => {
                const scheduleItem = document.createElement('div');
                scheduleItem.className = 'schedule-item';
                scheduleItem.innerHTML = `
                    <div class="schedule-time">${item.time}</div>
                    <div class="schedule-program">${item.program}</div>
                `;
                scheduleContainer.appendChild(scheduleItem);
            });
        }

        // Program updater
        function startProgramUpdater() {
            const programs = [
                'Sunday Service - Pastor Jonathan',
                'Youth Fellowship - Building Faith',
                'Bible Study - Book of Romans',
                'Evening Prayer Service',
                'Worship & Praise Session',
                'Christian Documentary',
                'Healing Ministry - Pastor Sarah',
                'Testimonies from Around the World',
                'Christian Music Videos',
                'Live from Jerusalem - Holy Land'
            ];

            setInterval(() => {
                const randomProgram = programs[Math.floor(Math.random() * programs.length)];
                document.getElementById('currentProgram').textContent = randomProgram;
            }, 300000); // Update every 5 minutes
        }

        // Admin system
        function showAdminLogin() {
            document.getElementById('adminPanel').style.display = 'block';
            document.getElementById('adminUsername').focus();
        }

        function hideAdminLogin() {
            document.getElementById('adminPanel').style.display = 'none';
            document.getElementById('adminUsername').value = '';
            document.getElementById('adminPassword').value = '';
        }

        function adminLogin() {
            const username = document.getElementById('adminUsername').value;
            const password = document.getElementById('adminPassword').value;

            if (adminCredentials[username] && adminCredentials[username] === password) {
                adminLoggedIn = true;
                hideAdminLogin();
                showAdminDashboard();
            } else {
                alert('âŒ Invalid credentials. Please check your username and password.');
                document.getElementById('adminPassword').value = '';
            }
        }

        function showAdminDashboard() {
            alert(`ðŸŽ‰ Welcome to Kingdom Network Admin Dashboard!\n\nâœ… Login Successful\nðŸ‘¤ User: ${document.getElementById('adminUsername').value}\nðŸ” Access Level: Full Administrator\n\nðŸ“Š Platform Status:\nâ€¢ HPT TV: Broadcasting Live âœ…\nâ€¢ HEM\'s Radio: Online âœ…\nâ€¢ Current Viewers: ${currentUserCount.toLocaleString()}\nâ€¢ Donation Goal: 67% Complete\nâ€¢ All Systems: Operational âœ…\n\nðŸ› ï¸ Admin features available:\nâ€¢ Content Management\nâ€¢ User Analytics\nâ€¢ Stream Settings\nâ€¢ Ministry Tools\nâ€¢ Financial Reports\n\nGod bless your ministry work! ðŸ™`);
        }

        // Quick access functions
        function showPrayerRequest() {
            alert('ðŸ™ Kingdom Network Prayer Request\n\nðŸ’ We believe in the power of prayer!\n\nShare your prayer requests with our ministry team:\n\nðŸ“§ Email: prayers@kingdomnetwork.org\nðŸ“± WhatsApp: +1 (555) PRAY-NOW\nðŸ’¬ Live Chat: Available 24/7\nðŸŒ Global Prayer Chain: Join thousands praying together\n\n"The prayer of a righteous person is powerful and effective." - James 5:16\n\nOur prayer warriors are standing with you! âœ¨');
        }

        function showCounseling() {
            alert('ðŸ¤ Kingdom Network Christian Counseling\n\nðŸ’™ Professional Christian counseling services:\n\nðŸ‘¨â€ðŸ’¼ Pastoral Counseling\nðŸ’‘ Marriage & Family Therapy\nðŸ‘¥ Group Counseling Sessions\nðŸ§  Mental Health Support\nâš–ï¸ Biblical Life Coaching\n\nðŸ“… Book your session:\nðŸŒ Online: Available worldwide\nðŸ“ž Phone: +1 (555) COUNSEL\nðŸ’¬ Live Chat: 24/7 support\n\n"Cast all your anxiety on him because he cares for you." - 1 Peter 5:7\n\nYou\'re not alone in this journey! ðŸ™');
        }

        function showTestimonies() {
            alert('â­ Kingdom Network Testimonies\n\nðŸŽ‰ Witness God\'s amazing works:\n\nðŸ’« Healing Testimonies\nðŸ™ Answered Prayers\nâ¤ï¸ Life Transformations\nðŸŒŸ Miracle Stories\nâœ¨ Faith Journeys\n\nðŸ“ Share your testimony:\nðŸ“§ testimonies@kingdomnetwork.org\nðŸ“¹ Video submissions welcome\nðŸŽ™ï¸ Live testimony broadcasts\n\n"They triumphed by the blood of the Lamb and by the word of their testimony." - Revelation 12:11\n\nYour story can inspire millions! ðŸŒ');
        }

        function showContact() {
            alert('ðŸ“ž Contact Kingdom Network Ministry\n\nðŸŒ Headquarters:\n123 Faith Avenue\nNew Jerusalem, Heaven\'s Gate 12345\nðŸ‡ºðŸ‡¸ United States\n\nðŸ“§ Email Contacts:\nâ€¢ General: info@kingdomnetwork.org\nâ€¢ Prayer: prayers@kingdomnetwork.org\nâ€¢ Donations: giving@kingdomnetwork.org\nâ€¢ Technical: support@kingdomnetwork.org\n\nðŸ“± Phone:\nâ€¢ Main: +1 (555) KINGDOM\nâ€¢ Prayer Line: +1 (555) PRAY-NOW\nâ€¢ Emergency: +1 (555) HELP-NOW\n\nðŸŒ Online:\nâ€¢ Live Chat: Available 24/7\nâ€¢ Social Media: @KingdomNetworkTV\nâ€¢ WhatsApp: +1 (555) 534-6436\n\nWe\'re here to serve you! ðŸ™');
        }

        // Navigation functions
        function showSection(section) {
            // For now, we'll use alerts to simulate navigation
            const sections = {
                'home': 'Welcome to Kingdom Network Home! ðŸ ',
                'church': 'â›ª Online Church Services\n\nðŸŽ‰ Join our global congregation!\nâ€¢ Live Sunday Service: 9:00 AM EST\nâ€¢ Interactive Prayer Sessions\nâ€¢ Virtual Communion\nâ€¢ Global Fellowship\nâ€¢ Multi-language Support\n\nExperience church like never before! ðŸ™',
                'bible': 'ðŸ“š Kingdom Network Bible College\n\nðŸŽ“ Accredited Christian Education:\nâ€¢ Theology Degrees\nâ€¢ Ministry Certification\nâ€¢ Biblical Studies\nâ€¢ Christian Leadership\nâ€¢ Missionary Training\n\nðŸ’» 100% Online Learning\nðŸŒ Students from 50+ countries\nðŸ“œ Accredited Diplomas\n\nStart your ministry education today! âœ¨',
                'shop': 'ðŸ›’ Kingdom Network Ministry Shop\n\nðŸ’ Support our mission:\nâ€¢ Christian Books & Bibles\nâ€¢ Worship Music CDs\nâ€¢ Ministry Resources\nâ€¢ Kingdom Network Merchandise\nâ€¢ Digital Downloads\n\nðŸ’³ Secure checkout\nðŸšš Worldwide shipping\nðŸ’– 100% proceeds support ministry\n\nShop with purpose! ðŸ™'
            };
            
            alert(sections[section] || 'Section coming soon! ðŸš§');
        }

        // Mobile menu toggle
        function toggleMobileMenu() {
            const navMenu = document.getElementById('navMenu');
            navMenu.classList.toggle('active');
        }

        // User interface updates
        function updateUserInterface() {
            // Add dynamic classes for animations
            const widgets = document.querySelectorAll('.widget');
            widgets.forEach((widget, index) => {
                widget.style.animationDelay = (index * 0.1) + 's';
            });
            
            // Add keyboard shortcuts
            document.addEventListener('keydown', function(event) {
                if (event.ctrlKey || event.metaKey) {
                    switch(event.key) {
                        case 'p':
                            event.preventDefault();
                            toggleRadio();
                            break;
                        case 'f':
                            event.preventDefault();
                            toggleFullscreen();
                            break;
                        case 'l':
                            event.preventDefault();
                            showAdminLogin();
                            break;
                    }
                }
            });
        }

        // Auto-refresh content periodically
        setInterval(() => {
            updateSchedule();
            updateUserInterface();
        }, 600000); // Refresh every 10 minutes

        // Handle window resize
        window.addEventListener('resize', function() {
            // Ensure mobile menu is hidden on desktop
            if (window.innerWidth > 768) {
                document.getElementById('navMenu').classList.remove('active');
            }
        });

        // Add smooth scrolling for internal links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth'
                    });
                }
            });
        });

        // Service worker for offline functionality (basic)
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                // Register service worker for offline functionality
                // This would need a separate service-worker.js file for full implementation
            });
        }

        // Analytics tracking (placeholder)
        function trackEvent(category, action, label) {
            // Placeholder for analytics tracking
            console.log(`Event tracked: ${category} - ${action} - ${label}`);
        }

        // Track user interactions
        document.addEventListener('click', function(event) {
            const target = event.target;
            if (target.matches('button') || target.matches('a')) {
                trackEvent('User Interaction', 'Click', target.textContent || target.className);
            }
        });
    </script>
</body>
</html>
